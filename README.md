# 同层手机前端 README（私聊/群聊）

本 README 覆盖两个页面文件的功能清单：

- 私聊：`同层私聊喵喵喵2.html`
- 群聊：`同层群聊6.html`

两者整体 UI/交互高度一致：都是“主屏（Home）+ 聊天界面 + 设置中心 + 多媒体/扩展功能”的一体化页面。

---

## 共同功能（两份页面都有/以页面内入口为准）

### 1) 主屏（Home / 桌面）
- iOS 风主屏外观：状态栏（时间/信号/电量示意）、“灵动岛”胶囊标题、时钟/日历小组件、App 网格、Dock。
- 已移除“天气”组件（主屏不显示天气卡片）。
- Dock 快捷入口：点击 Dock 图标会复用 App 网格的点击逻辑（相当于点同名 App 图标）。
- 主屏壁纸：
  - 设置里可上传/重置主屏壁纸；
  - 生效在 `#homeOverlay` 背景图；
  - 使用 `localStorage['homeWallpaper']` 持久化。
- 主屏应用入口（常见为这些图标/按钮）：
  - 聊天（进入聊天页/会话列表）
  - 朋友圈（进入朋友圈/提示占位，视页面实现）
  - 商店（视页面实现：可能是占位或打开面板/链接）
  - 云音乐（打开云音乐覆盖层/播放器）
  - 设置（打开设置中心）

### 2) 聊天界面（消息/输入）
- 消息列表渲染、滚动与移动端滚动条美化。
- 输入框为 `textarea`：自动增高/缩回（输入多行时更好用）。
- 发送按钮：发送文本消息。
- 语音模式按钮（入口存在时）：切换/模拟语音输入（具体行为以页面实现为准）。
- 表情按钮（入口存在时）：打开表情/表情包相关面板（具体行为以页面实现为准）。
- “+”更多功能面板（More Actions Grid）：提供一组常见 IM 扩展动作（见下）。

### 3) “+”更多功能面板（常见动作）
> 不同版本可能会增减入口，但整体思路一致：模拟微信/QQ 的常用功能。

- 照片：发送图片/插入图片。
- 文件：发送文件/插入文件。
- 位置：发送位置卡片/定位信息（模拟）。
- 红包：模拟红包消息。
- 转账：模拟转账消息。
- 撤回：撤回上一条/指定消息（模拟）。
- 引用：引用/回复某条消息（模拟）。
- 听歌：打开音乐面板/播放器。
- 语音通话：模拟语音通话入口/请求。
- 表情包：打开表情包入口（若实现）。
- 变声语音：模拟变声语音入口（若实现）。
- 自定义时间：对消息时间进行自定义/回填（常用于截图/剧情）。
- 查看对方状态：模拟“对方正在输入/忙碌/在线”等状态。

### 4) 截图/导出
- 截屏聊天记录：生成可保存的聊天截图（移动端长按保存/或提供下载按钮）。

### 5) 设置中心（个性化与开关）
- 我的头像：上传/重置，自定义“用户头像”。
- 聊天壁纸：上传/重置，自定义聊天背景（`.chat-messages` 背景图）。
  - 持久化键：`localStorage['chatWallpaper']`
- 主屏壁纸：上传/重置，自定义主屏背景（`#homeOverlay` 背景图）。
  - 持久化键：`localStorage['homeWallpaper']`
- 角色头像（若提供该入口）：
  - 给指定角色/联系人设置头像；
  - 持久化键通常为 `localStorage['chatCharAvatars']`（JSON）。
- 破限模式（Jailbreak）开关：对接/切换特定预设或行为（以页面实现为准）。
- 界面缩放：调整整体 UI 缩放比例（适配不同屏幕）。
- 打字速度/打字机效果档位：控制 AI/对方消息的“逐字出现”速度（若实现）。
- 主题系统（如果设置页提供选择）：
  - 多套主题（办公极简/像素风/古风/女性向/冬季系列/自定义等）；
  - 自定义主题变量（custom theme）可覆盖颜色/阴影等。
- 气泡样式系统（如果设置页提供选择）：
  - 多套气泡（默认现代、黑钻石 3D、水光粉、圆润蓝、微信绿、短信蓝、水滴薄荷/紫罗兰/米色、可爱渐变系列等）。

### 6) 消息视觉特效
- 关键词特效层（全屏粒子容器）：烟花/爱心雨/雪花/彩虹粒子/星星闪烁等（触发规则以页面实现为准）。
- 移动端优化：右键/长按菜单、触摸设备交互优化（更接近手机 IM 的手感）。

### 7) 音乐相关（两套入口）
- 内置音乐面板（Music Panel）：
  - 支持粘贴网易云/QQ 音乐链接解析；
  - 支持批量输入（多行）；
  - 添加到播放列表、查看播放列表、清空；
  - 本地文件/网络链接添加；
  - 搜索歌曲（可选不同来源：网易云/QQ/酷我/酷狗，若页面实现包含）。
- 云音乐全屏覆盖层（Cloud Music Overlay）：
  - iframe 播放器打开/关闭（常见为 `music.gdstudio.org`）；
  - 与内置音乐面板分离，避免冲突。

### 8) AI 相关入口（若页面实现包含）
- 请求 AI 回复按钮：一键让“对方/AI”生成回复（具体接入取决于 SillyTavern 环境与页面实现）。
- 识图/视觉模式（若设置页包含）：可配置不同识图模式、API 地址/Key、模型等（以页面实现为准）。

---

## 私聊版特有/更完整（`同层私聊喵喵喵2.html`）

### 1) 私聊会话/好友体系
- 私聊标签栏（Private Chat Tabs）：多会话切换（入口存在时显示）。
- 一体化好友面板（Friends Panel）：
  - 好友列表打开/关闭；
  - 添加好友入口（若实现）；
  - 从好友列表进入对应私聊。

### 2) 朋友圈（Moments / 朋友圈覆盖层）
- 朋友圈全屏覆盖层（`momentsOverlay`）：
  - 类微信的封面区（Cover）、头像、昵称显示；
  - 信息流（动态）列表；
  - 点赞、评论（及评论时间/展示，具体以实现为准）。
- 朋友圈发布入口：
  - 底部发布按钮（＋）；
  - 自定义时间按钮（🕐）。
- 朋友圈封面自定义：
  - 支持点击封面更换；
  - 或在设置中心上传/重置（如果设置页提供该入口）。

---

## 群聊版特有/更常见（`同层群聊6.html`）

> 群聊版通常更偏“群聊消息流 + 群聊辅助功能”，并同步了同款主屏与主屏壁纸设置。

### 1) 收藏/收藏夹（若页面内入口存在）
- 收藏消息：把指定消息加入收藏（入口/交互以页面实现为准）。
- 查看收藏：收藏列表面板打开/关闭。
- 清空收藏：一键清空收藏数据。

### 2) 一起听/群聊音频类扩展（若页面实现包含）
- “一起听/协同听歌”类入口与状态切换（以页面实现为准）。

---

## 数据存储（常见键名汇总）

不同版本可能略有差异，这里列出本套页面常用的本地持久化键名：

- `chatUserAvatar`：我的头像（DataURL 或 URL）
- `chatWallpaper`：聊天壁纸（DataURL 或 URL）
- `homeWallpaper`：主屏壁纸（DataURL 或 URL）
- `chatCharAvatars`：角色头像映射（JSON）
- 主题/气泡/缩放/速度等：`chatTheme`、`chatBubbleStyle`、`interfaceScale`、`typingSpeedLevel`、`jailbreakEnabled`（以页面实现为准）

---

